<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scatter Unlimited Kolom & Kalkulator Credit</title>
<!-- Favicon dadu dalam format base64 -->
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŽ²</text></svg>">
<!-- Font Awesome untuk ikon -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root {
--primary-color: #4caf50;
--primary-dark: #388e3c;
--primary-darker: #2e7d32;
--primary-light: #81c784;
--primary-lighter: #1a3b1c;
--text-primary: #f0f0f0;
--text-secondary: #b0b0b0;
--bg-primary: #0a0e12;
--bg-secondary: #151a21;
--bg-card: #1d242e;
--border-color: #2a3542;
--success-color: #388e3c;
--success-bg: rgba(56, 142, 60, 0.2);
--shadow-color: rgba(0, 0, 0, 0.6);
--col1-color: #ff6b6b;
--col2-color: #4ecdc4;
--col3-color: #ffd166;
--col4-color: #9b5de5;
--col5-color: #f15bb5;
--col6-color: #00bbf9;
--blue-light: #64b5f6;
--blue-lighter: rgba(100, 181, 246, 0.1);
--delete-color: #f44336;
--warning-color: #ff9800;
}

* {
margin: 0;
padding: 0;
box-sizing: border-box;
transition: all 0.3s ease;
}

body {
font-family: 'Inter', sans-serif;
color: var(--text-primary);
line-height: 1.6;
padding: 20px;
min-height: 100vh;
background-color: var(--bg-primary);
overflow-x: hidden;
background-image: url('https://cdn.areabermain.club/assets/cdn/az6/2025/04/01/20250401/5dc9d083e18085eef7c0cd7fcf52bd46/linetogel-bg-new.jpg');
background-size: cover;
background-position: center;
background-attachment: fixed;
position: relative;
font-weight: 500;
}

body::before {
content: '';
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(10, 14, 18, 0.7);
z-index: -1;
}

.container {
max-width: 1600px;
margin: 0 auto;
padding: 0;
position: relative;
z-index: 1;
}

header {
text-align: center;
padding: 30px 20px;
margin-bottom: 20px;
position: relative;
}

header h1 {
font-size: 2.5rem;
font-weight: 800;
color: var(--primary-color);
margin-bottom: 10px;
position: relative;
display: inline-block;
text-shadow: 0 2px 10px rgba(0,0,0,0.5);
}

header h1::after {
content: '';
position: absolute;
bottom: -10px;
left: 50%;
transform: translateX(-50%);
width: 100px;
height: 4px;
background: linear-gradient(90deg, var(--primary-color), var(--primary-darker));
border-radius: 4px;
box-shadow: 0 2px 5px rgba(0,0,0,0.3);
}

header p {
color: var(--text-secondary);
max-width: 600px;
margin: 20px auto 0;
font-size: 1.1rem;
font-weight: 500;
}

.card {
background: var(--bg-card);
border-radius: 16px;
padding: 30px;
box-shadow: 0 15px 40px var(--shadow-color);
position: relative;
overflow: hidden;
margin-bottom: 30px;
border: 1px solid var(--border-color);
backdrop-filter: blur(8px);
-webkit-backdrop-filter: blur(8px);
}

h2 {
color: var(--primary-color);
margin: 0 0 25px;
font-weight: 700;
font-size: 1.7rem;
padding-bottom: 15px;
border-bottom: 2px solid var(--border-color);
text-shadow: 0 1px 3px rgba(0,0,0,0.3);
}

h3 {
color: var(--primary-light);
margin-bottom: 15px;
font-weight: 600;
font-size: 1.2rem;
padding-bottom: 10px;
}

/* Tab Container */
.tab-container {
display: flex;
margin-bottom: 25px;
border-bottom: 2px solid var(--border-color);
}

.tab-button {
padding: 12px 24px;
background: transparent;
border: none;
color: var(--text-secondary);
font-weight: 600;
cursor: pointer;
position: relative;
transition: all 0.3s ease;
font-size: 1rem;
border-radius: 8px 8px 0 0;
}

.tab-button.active {
color: var(--primary-color);
}

.tab-button.active::after {
content: '';
position: absolute;
bottom: -2px;
left: 0;
width: 100%;
height: 3px;
background: linear-gradient(90deg, var(--primary-color), var(--primary-darker));
border-radius: 3px;
}

.tab-content {
display: none;
}

.tab-content.active {
display: block;
}

/* STYLE UNTUK KALKULATOR CREDIT - DIKECILKAN */
.credit-calculator-container {
margin-top: 20px;
padding: 20px;
background: var(--bg-secondary);
border-radius: 12px;
border: 1px solid var(--border-color);
transform: scale(0.9);
transform-origin: top left;
width: 111%; /* Mengkompensasi scaling */
}

.credit-calculator-grid {
display: grid;
grid-template-columns: 1fr 1fr;
gap: 20px;
}

.credit-input-section {
grid-column: 1;
}

.credit-result-section {
grid-column: 2;
display: flex;
flex-direction: column;
justify-content: space-between;
}

#creditData {
min-height: 150px;
font-size: 0.85rem;
padding: 12px;
background-color: var(--bg-card);
color: var(--text-primary);
border: 1px solid var(--border-color);
border-radius: 8px;
resize: vertical;
width: 100%;
}

.credit-result-box {
background-color: var(--bg-card);
border: 1px solid var(--border-color);
border-radius: 10px;
padding: 15px;
height: 100%;
display: flex;
flex-direction: column;
}

.credit-result-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 10px;
padding-bottom: 8px;
border-bottom: 1px solid var(--border-color);
}

.credit-result-title {
color: var(--primary-color);
font-weight: 600;
font-size: 1rem;
}

.credit-total {
font-size: 1.3rem;
color: var(--primary-color);
font-weight: bold;
margin: 10px 0;
text-align: center;
padding: 10px;
background-color: var(--primary-lighter);
border-radius: 8px;
border: 1px solid var(--primary-color);
}

.credit-action-buttons {
display: flex;
gap: 10px;
margin-top: auto;
}

.credit-btn {
flex: 1;
padding: 8px 12px;
border-radius: 6px;
font-size: 0.85rem;
display: flex;
align-items: center;
justify-content: center;
gap: 6px;
cursor: pointer;
transition: all 0.3s ease;
border: none;
font-weight: 600;
}

.credit-copy-btn {
background: var(--primary-color);
color: white;
}

.credit-copy-btn:hover {
background: var(--primary-dark);
transform: translateY(-2px);
box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
}

.credit-clear-btn {
background: var(--delete-color);
color: white;
}

.credit-clear-btn:hover {
background: #d32f2f;
transform: translateY(-2px);
box-shadow: 0 5px 15px rgba(244, 67, 54, 0.3);
}

.copy-notification {
color: var(--primary-color);
font-size: 0.75rem;
margin-top: 8px;
text-align: center;
height: 18px;
}

.credit-description {
font-size: 0.85rem;
color: var(--text-secondary);
margin-bottom: 12px;
line-height: 1.5;
}

/* Toast Notification Styles */
#toast {
position: fixed;
bottom: 30px;
right: 30px;
background-color: var(--success-color);
color: white;
padding: 12px 24px;
border-radius: 8px;
font-weight: 600;
font-size: 0.9rem;
box-shadow: 0 5px 15px var(--shadow-color);
z-index: 10000;
display: none;
align-items: center;
gap: 8px;
min-width: 200px;
text-align: center;
animation: toastSlideIn 0.3s ease-out, toastSlideOut 0.3s ease-in 1.7s forwards;
border-left: 4px solid var(--primary-color);
}

#toast.error {
background-color: var(--delete-color);
border-left-color: #c62828;
}

@keyframes toastSlideIn {
from {
opacity: 0;
transform: translateX(100%);
}
to {
opacity: 1;
transform: translateX(0);
}
}

@keyframes toastSlideOut {
from {
opacity: 1;
transform: translateX(0);
}
to {
opacity: 0;
transform: translateX(100%);
}
}

/* Responsive styles untuk kalkulator credit */
@media (max-width: 992px) {
.credit-calculator-grid {
grid-template-columns: 1fr;
}

.credit-input-section,
.credit-result-section {
grid-column: 1;
}

.credit-result-box {
margin-top: 15px;
}
}

@media (max-width: 768px) {
.credit-calculator-container {
padding: 15px;
transform: scale(1);
width: 100%;
}

.credit-action-buttons {
flex-direction: column;
}

.credit-btn {
width: 100%;
}

/* Adjust toast for mobile */
#toast {
bottom: 20px;
right: 20px;
left: 20px;
min-width: auto;
}
}

/* STYLE LAINNYA YANG SUDAH ADA - Tetap sama seperti sebelumnya */
.input-wrapper {
position: relative;
margin-bottom: 20px;
}

textarea {
width: 100%;
min-height: 80px;
padding: 12px 40px 12px 12px;
border-radius: 12px;
border: 1px solid var(--border-color);
font-family: 'Inter', monospace;
font-size: 13px;
resize: vertical;
background-color: var(--bg-secondary);
color: var(--text-primary);
transition: all 0.3s ease;
box-shadow: inset 0 3px 6px rgba(0,0,0,0.3);
font-weight: 500;
}

textarea:focus {
outline: none;
border-color: var(--primary-color);
box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.3), inset 0 3px 6px rgba(0,0,0,0.3);
}

.action-buttons {
display: flex;
justify-content: flex-end;
gap: 15px;
margin-top: 20px;
}

.btn {
padding: 12px 24px;
border-radius: 10px;
cursor: pointer;
font-size: 15px;
font-weight: 600;
transition: all 0.3s ease;
display: flex;
align-items: center;
gap: 10px;
box-shadow: 0 5px 15px var(--shadow-color);
border: none;
}

.btn-clear {
background: linear-gradient(145deg, #f44336, #d32f2f);
color: white;
border: none;
}

.btn-clear:hover {
background: linear-gradient(145deg, #e53935, #c62828);
transform: translateY(-3px);
box-shadow: 0 8px 20px rgba(229, 57, 53, 0.3);
}

.result-container {
margin-top: 30px;
}

.six-columns-result {
margin-top: 25px;
}

.scatter-row {
display: flex;
flex-wrap: wrap;
gap: 12px;
margin-bottom: 20px;
justify-content: center; /* Default center untuk baris yang tidak penuh */
}

.scatter-row.full-row {
justify-content: space-between; /* Untuk baris penuh 6 kolom */
}

.column-result {
background-color: var(--bg-secondary);
border: 1px solid var(--border-color);
border-radius: 14px;
padding: 15px;
box-shadow: 0 8px 20px var(--shadow-color);
position: relative;
transition: all 0.4s ease;
display: block; /* Diubah dari none ke block agar kolom tetap tampil */
flex: 0 0 calc(16.666% - 10px); /* Lebar sekitar 1/6 dengan margin */
max-width: calc(16.666% - 10px);
}

.column-result.has-data {
background: var(--blue-lighter);
border-top: 4px solid var(--blue-light);
box-shadow: 0 8px 25px rgba(0, 0, 0, 0.7);
}

.column-result.cancelled {
opacity: 0.7;
background: rgba(255, 255, 255, 0.05);
border: 1px dashed var(--border-color);
}

.column-result.done {
background: var(--success-bg);
border-color: var(--primary-color);
box-shadow: 0 8px 20px rgba(56, 142, 60, 0.2);
}

.column-result.col1.has-data { border-top-color: var(--blue-light); }
.column-result.col2.has-data { border-top-color: var(--blue-light); }
.column-result.col3.has-data { border-top-color: var(--blue-light); }
.column-result.col4.has-data { border-top-color: var(--blue-light); }
.column-result.col5.has-data { border-top-color: var(--blue-light); }
.column-result.col6.has-data { border-top-color: var(--blue-light); }

.column-result h4 {
margin-bottom: 12px;
font-size: 1rem;
text-align: center;
padding-bottom: 8px;
border-bottom: 2px solid var(--border-color);
font-weight: 700;
}

.column-result.has-data h4 {
font-weight: 800;
color: var(--blue-light);
}

.column-result.cancelled h4 {
color: var(--text-secondary);
}

.column-result.col1 h4 { color: var(--blue-light); }
.column-result.col2 h4 { color: var(--blue-light); }
.column-result.col3 h4 { color: var(--blue-light); }
.column-result.col4 h4 { color: var(--blue-light); }
.column-result.col5 h4 { color: var(--blue-light); }
.column-result.col6 h4 { color: var(--blue-light); }

.column-result.done h4 {
color: var(--primary-color);
border-bottom-color: var(--primary-color);
}

.column-result-item {
margin-bottom: 10px;
padding: 8px 10px;
background-color: var(--bg-card);
border-radius: 10px;
display: flex;
align-items: center;
position: relative;
box-shadow: 0 3px 8px var(--shadow-color);
border: 1px solid var(--border-color);
font-size: 0.85rem;
}

.column-result.has-data .column-result-item {
background-color: rgba(100, 181, 246, 0.15);
border-color: rgba(100, 181, 246, 0.3);
}

.column-result.cancelled .column-result-item {
background-color: rgba(255, 255, 255, 0.05);
border-color: rgba(255, 255, 255, 0.1);
}

.column-result.done .column-result-item {
background-color: rgba(56, 142, 60, 0.15);
border-color: rgba(56, 142, 60, 0.3);
}

.column-result-label {
font-weight: 700;
color: var(--primary-light);
font-size: 0.8rem;
margin-bottom: 3px;
flex: 1;
}

.column-result.has-data .column-result-label {
color: var(--blue-light);
}

.column-result.cancelled .column-result-label {
color: var(--text-secondary);
}

.column-result.done .column-result-label {
color: var(--primary-color);
}

.column-result-value {
font-size: 0.8rem;
word-break: break-all;
font-family: 'Inter', monospace;
flex: 2;
color: var(--text-primary);
font-weight: 500;
}

.column-result.cancelled .column-result-value {
color: var(--text-secondary);
}

.column-result.done .column-result-value {
color: var(--text-primary);
font-weight: 500;
}

.column-btn-copy {
background-color: transparent;
color: var(--text-secondary);
border: none;
padding: 5px;
border-radius: 50%;
cursor: pointer;
width: 26px;
height: 26px;
display: flex;
align-items: center;
justify-content: center;
transition: all 0.3s ease;
flex-shrink: 0;
position: relative;
overflow: hidden;
margin-left: 6px;
}

.column-btn-copy:hover {
background-color: rgba(56, 142, 60, 0.15);
color: var(--primary-color);
transform: scale(1.1);
}

/* Tombol copy di kolom yang selesai */
.column-result.done .column-btn-copy {
opacity: 0.5;
cursor: not-allowed;
pointer-events: none;
}

.column-result.done .column-btn-copy:hover {
background-color: transparent;
color: var(--text-secondary);
transform: none;
}

.column-result-item.copied {
animation: highlightCopy 1.5s ease-out;
border-color: var(--primary-color);
}

@keyframes highlightCopy {
0% {
background-color: var(--bg-card);
box-shadow: 0 0 0 0 rgba(76, 175, 80, 0);
}
20% {
background-color: rgba(76, 175, 80, 0.1);
box-shadow: 0 0 10px 5px rgba(76, 175, 80, 0.2);
}
100% {
background-color: var(--bg-card);
box-shadow: 0 0 0 0 rgba(76, 175, 80, 0);
}
}

.view-image-btn {
background: rgba(56, 142, 60, 0.15);
color: var(--primary-color);
border: 1px solid var(--border-color);
border-radius: 10px;
padding: 8px 12px;
font-size: 0.85rem;
display: flex;
align-items: center;
justify-content: center;
gap: 6px;
cursor: pointer;
transition: all 0.3s ease;
width: 100%;
margin-top: 12px;
font-weight: 600;
}

.view-image-btn:hover {
background: rgba(56, 142, 60, 0.25);
transform: translateY(-3px);
box-shadow: 0 4px 12px rgba(56, 142, 60, 0.15);
border-color: var(--primary-light);
}

.done-btn {
background: linear-gradient(145deg, var(--primary-color), var(--primary-darker));
color: white;
border: none;
border-radius: 10px;
padding: 8px 12px;
font-size: 0.85rem;
display: flex;
align-items: center;
justify-content: center;
gap: 6px;
cursor: pointer;
transition: all 0.3s ease;
width: 100%;
margin-top: 10px;
font-weight: 700;
box-shadow: 0 4px 12px rgba(56, 142, 60, 0.3);
}

.done-btn:hover {
background: linear-gradient(145deg, var(--primary-dark), #1b5e20);
transform: translateY(-3px);
box-shadow: 0 6px 15px rgba(56, 142, 60, 0.4);
}

.done-btn.undo {
background: linear-gradient(145deg, #616161, #424242);
}

.done-btn.undo:hover {
background: linear-gradient(145deg, #757575, #616161);
}

.cancel-btn {
background: rgba(244, 67, 54, 0.15);
color: var(--delete-color);
border: 1px solid var(--border-color);
border-radius: 10px;
padding: 8px 12px;
font-size: 0.85rem;
display: flex;
align-items: center;
justify-content: center;
gap: 6px;
cursor: pointer;
transition: all 0.3s ease;
width: 100%;
margin-top: 8px;
font-weight: 600;
}

.cancel-btn:hover {
background: rgba(244, 67, 54, 0.25);
transform: translateY(-3px);
box-shadow: 0 4px 12px rgba(244, 67, 54, 0.15);
border-color: var(--delete-color);
}

.cancel-btn.undo {
background: rgba(100, 181, 246, 0.15);
color: var(--blue-light);
}

.cancel-btn.undo:hover {
background: rgba(100, 181, 246, 0.25);
border-color: var(--blue-light);
}

.link-preview-container {
display: flex;
gap: 5px;
justify-content: flex-end;
width: 100%;
align-items: center;
}

.link-placeholder {
display: flex;
align-items: center;
padding: 0 8px;
color: var(--text-secondary);
font-size: 0.85rem;
}

.modal {
display: none;
position: fixed;
z-index: 1000;
left: 0;
top: 0;
width: 100%;
height: 100%;
background-color: rgba(0, 0, 0, 0.95);
overflow: auto;
animation: fadeIn 0.3s;
}

.modal-content {
display: flex;
flex-direction: column;
justify-content: center;
align-items: center;
height: 100%;
padding: 20px;
position: relative;
}

.images-container {
display: flex;
flex-wrap: wrap;
justify-content: center;
gap: 20px;
max-width: 100%;
margin-top: 20px;
}

.modal-img {
max-width: 800px;
max-height: 900px;
object-fit: contain;
border: 3px solid var(--primary-color);
border-radius: 8px;
box-shadow: 0 0 20px rgba(76, 175, 80, 0.5);
transition: transform 0.3s ease;
cursor: zoom-in;
}

.modal-img.zoomed {
cursor: zoom-out;
transform: scale(1.5);
z-index: 1002;
position: relative;
}

.close-btn {
position: absolute;
top: 30px;
right: 40px;
color: var(--primary-color);
font-size: 45px;
font-weight: bold;
cursor: pointer;
transition: all 0.3s;
text-shadow: 0 0 15px rgba(0, 0, 0, 0.7);
z-index: 1001;
}

.close-btn:hover {
color: var(--primary-light);
transform: rotate(90deg);
}

.image-info {
position: absolute;
top: 30px;
left: 40px;
color: var(--primary-color);
font-size: 18px;
background-color: rgba(0, 0, 0, 0.7);
padding: 15px 25px;
border-radius: 30px;
z-index: 1001;
font-weight: 600;
display: flex;
flex-direction: column;
align-items: flex-start;
gap: 5px;
max-width: 600px;
}

.image-detail {
font-size: 16px;
font-weight: 500;
display: flex;
align-items: center;
gap: 8px;
}

.image-detail i {
color: var(--blue-light);
min-width: 20px;
text-align: center;
}

@keyframes fadeIn {
from { opacity: 0; }
to { opacity: 1; }
}

@keyframes zoomIn {
from { transform: scale(0.8); opacity: 0; }
to { transform: scale(1); opacity: 1; }
}

/* Toggle TS Styles */
.ts-toggle-container {
display: flex;
align-items: center;
gap: 10px;
margin-bottom: 15px;
background: var(--bg-secondary);
padding: 10px 15px;
border-radius: 10px;
border: 1px solid var(--border-color);
}

.ts-toggle-label {
font-weight: 600;
color: var(--text-primary);
font-size: 0.95rem;
}

.ts-toggle {
position: relative;
display: inline-block;
width: 50px;
height: 24px;
}

.ts-toggle input {
opacity: 0;
width: 0;
height: 0;
}

.ts-toggle-slider {
position: absolute;
cursor: pointer;
top: 0;
left: 0;
right: 0;
bottom: 0;
background-color: var(--bg-card);
transition: .4s;
border-radius: 24px;
border: 1px solid var(--border-color);
}

.ts-toggle-slider:before {
position: absolute;
content: "";
height: 18px;
width: 18px;
left: 3px;
bottom: 2px;
background-color: var(--text-secondary);
transition: .4s;
border-radius: 50%;
}

input:checked + .ts-toggle-slider {
background-color: var(--primary-color);
}

input:checked + .ts-toggle-slider:before {
transform: translateX(26px);
background-color: white;
}

.result-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 25px;
padding-bottom: 15px;
border-bottom: 2px solid var(--border-color);
}

.result-header h2 {
margin-bottom: 0;
}

/* Styles untuk input otomatis - DIKECILKAN */
.auto-input-container {
margin-bottom: 25px;
transition: all 0.3s ease;
}

.auto-input-header {
display: flex;
align-items: center;
justify-content: space-between;
margin-bottom: 10px;
}

.auto-input-header h3 {
margin-bottom: 0;
display: flex;
align-items: center;
gap: 10px;
font-size: 1.1rem;
}

.auto-input-info {
display: flex;
align-items: center;
gap: 10px;
color: var(--text-secondary);
font-size: 0.9rem;
}

.auto-input-info .count-badge {
background: var(--primary-color);
color: white;
padding: 3px 8px;
border-radius: 10px;
font-size: 0.8rem;
font-weight: 600;
}

.auto-input-container textarea {
min-height: 120px;
transition: all 0.3s ease;
}

.auto-input-actions {
display: flex;
justify-content: space-between;
align-items: center;
margin-top: 10px;
}

.auto-input-warning {
color: var(--warning-color);
font-size: 0.85rem;
font-weight: 500;
display: none;
align-items: center;
gap: 5px;
background: rgba(255, 152, 0, 0.1);
padding: 8px 12px;
border-radius: 8px;
border: 1px solid var(--warning-color);
}

.auto-input-error {
color: var(--delete-color);
font-size: 0.85rem;
font-weight: 500;
display: none;
align-items: center;
gap: 5px;
background: rgba(244, 67, 54, 0.1);
padding: 8px 12px;
border-radius: 8px;
border: 1px solid var(--delete-color);
}

.auto-delete-btn {
background: rgba(244, 67, 54, 0.15);
color: var(--delete-color);
border: 1px solid var(--border-color);
border-radius: 10px;
padding: 8px 15px;
font-size: 0.85rem;
display: flex;
align-items: center;
gap: 6px;
cursor: pointer;
transition: all 0.3s ease;
font-weight: 600;
}

.auto-delete-btn:hover {
background: rgba(244, 67, 54, 0.25);
transform: translateY(-3px);
box-shadow: 0 4px 12px rgba(244, 67, 54, 0.15);
border-color: var(--delete-color);
}

/* Styles untuk tombol navigasi kolom di modal */
.modal-navigation {
display: flex;
justify-content: center;
gap: 10px;
margin: 20px 0;
position: absolute;
bottom: 30px;
left: 0;
right: 0;
z-index: 1002;
overflow-x: auto;
padding: 10px 20px;
max-width: 90%;
margin-left: auto;
margin-right: auto;
flex-wrap: wrap;
}

.nav-btn {
width: 40px;
height: 40px;
border-radius: 50%;
border: 2px solid var(--primary-color);
background: rgba(10, 14, 18, 0.7);
color: var(--primary-color);
font-weight: bold;
cursor: pointer;
display: flex;
align-items: center;
justify-content: center;
transition: all 0.3s ease;
font-size: 16px;
box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
flex-shrink: 0;
}

.nav-btn:hover {
background: var(--primary-color);
color: white;
transform: scale(1.1);
}

.nav-btn.active {
background: var(--primary-color);
color: white;
transform: scale(1.1);
box-shadow: 0 0 15px rgba(76, 175, 80, 0.7);
}

.nav-btn:disabled {
opacity: 0.5;
cursor: not-allowed;
border-color: var(--text-secondary);
color: var(--text-secondary);
}

.nav-btn:disabled:hover {
background: rgba(10, 14, 18, 0.7);
color: var(--text-secondary);
transform: none;
}

/* Styles untuk kontrol zoom */
.zoom-controls {
position: absolute;
top: 30px;
right: 100px;
display: flex;
gap: 10px;
z-index: 1001;
}

.zoom-btn {
width: 40px;
height: 40px;
border-radius: 50%;
background: rgba(10, 14, 18, 0.7);
color: var(--primary-color);
border: 2px solid var(--primary-color);
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
transition: all 0.3s ease;
font-size: 18px;
box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
}

.zoom-btn:hover {
background: var(--primary-color);
color: white;
transform: scale(1.1);
}

.zoom-indicator {
position: absolute;
top: 80px;
right: 40px;
color: var(--primary-color);
font-size: 14px;
background: rgba(10, 14, 18, 0.7);
padding: 5px 10px;
border-radius: 20px;
z-index: 1001;
font-weight: 600;
display: none;
}

/* Responsive untuk kolom hasil */
@media (max-width: 1600px) {
.column-result {
flex: 0 0 calc(33.333% - 12px);
max-width: calc(33.333% - 12px);
}
}

@media (max-width: 1200px) {
.column-result {
flex: 0 0 calc(50% - 12px);
max-width: calc(50% - 12px);
}
}

@media (max-width: 992px) {
.column-result {
flex: 0 0 calc(50% - 12px);
max-width: calc(50% - 12px);
}
}

@media (max-width: 768px) {
.card {
padding: 25px 15px;
}

header {
padding: 20px 15px;
}

header h1 {
font-size: 2rem;
}

.column-result {
flex: 0 0 100%;
max-width: 100%;
}

.action-buttons {
flex-direction: column;
gap: 10px;
}

.btn {
width: 100%;
justify-content: center;
}

.close-btn {
top: 20px;
right: 25px;
font-size: 35px;
}

.image-info {
top: 20px;
left: 15px;
font-size: 14px;
padding: 10px 15px;
}

.modal-img {
max-width: 90%;
max-height: 400px;
}

.result-header {
flex-direction: column;
align-items: flex-start;
gap: 15px;
}

.auto-input-header {
flex-direction: column;
align-items: flex-start;
gap: 10px;
}

.auto-input-actions {
flex-direction: column;
gap: 10px;
align-items: flex-start;
}

.modal-navigation {
bottom: 20px;
max-width: 95%;
}

.nav-btn {
width: 35px;
height: 35px;
font-size: 14px;
}

.zoom-controls {
top: 20px;
right: 70px;
}

.zoom-btn {
width: 35px;
height: 35px;
font-size: 16px;
}

.zoom-indicator {
top: 65px;
right: 25px;
font-size: 12px;
}
}
</style>
</head>
<body>
<div class="container">
<header>
<h1>Scatter Unlimited Kolom & Kalkulator Credit</h1>
<p>Tools untuk memproses data scatter Unlimited kolom berbeda dan credit PG SOFT</p>
</header>

<div class="card">
<!-- Tab Navigation -->
<div class="tab-container">
<button class="tab-button active" data-tab="scatter-tab">Scatter Unlimited Kolom</button>
<button class="tab-button" data-tab="credit-tab">Kalkulator Credit PG SOFT</button>
</div>

<!-- Tab Scatter 6 Kolom -->
<div id="scatter-tab" class="tab-content active">
<h2>Input Data Scatter</h2>

<!-- Input otomatis - SATU-SATUNYA INPUT UNTUK SCATTER -->
<div class="auto-input-container" id="autoInputContainer">
<div class="auto-input-header">
<h3>
<i class="fas fa-magic"></i>
Input Otomatis Unlimited Kolom sekaligus
</h3>
<div class="auto-input-info">
<span>Data terdeteksi: <span id="dataCount" class="count-badge">0</span></span>
</div>
</div>
<textarea id="autoInput" placeholder="Tempel data mentah di sini... Data akan otomatis tersebar ke kolom di bawah ini. Input unlimited."></textarea>
<div class="auto-input-actions">
<div class="auto-input-warning" id="autoInputWarning">
<i class="fas fa-info-circle"></i>
<span>Data akan selalu ditampilakan berapapun hasilnya.</span>
</div>
<div class="auto-input-error" id="autoInputError">
<i class="fas fa-exclamation-triangle"></i>
<span>Format data tidak valid. Pastikan data mengandung BET dan link gambar.</span>
</div>
<button class="auto-delete-btn" id="autoDeleteBtn">
<i class="fas fa-trash-alt"></i> Hapus Input
</button>
</div>
</div>

<div class="action-buttons">
<button class="btn btn-clear" id="clearScatter6Btn">
<i class="fas fa-trash-alt"></i> Hapus Semua
</button>
</div>

<div class="result-container">
<div class="result-header">
<h2>Hasil Format Scatter</h2>
<div class="ts-toggle-container">
<span class="ts-toggle-label">TS Mode:</span>
<label class="ts-toggle">
<input type="checkbox" id="tsToggle">
<span class="ts-toggle-slider"></span>
</label>
</div>
</div>
<div class="six-columns-result" id="scatter6Results">
<!-- Hasil akan diisi oleh JavaScript -->
</div>
</div>
</div>

<!-- Tab Kalkulator Credit PG SOFT -->
<div id="credit-tab" class="tab-content">
<h2>Kalkulator Credit PG SOFT</h2>

<div class="credit-calculator-container">
<p class="credit-description">Tempel data dari seamless untuk menghitung total credit secara otomatis</p>

<div class="credit-calculator-grid">
<div class="credit-input-section">
<div class="input-wrapper">
<textarea id="creditData" placeholder="Tempelnya disini...
Contoh:
...
Credit
IDR 1,000
...
Credit
IDR 2,500"></textarea>
</div>

<div class="action-buttons">
<button class="credit-btn credit-clear-btn" id="clearCreditBtn">
<i class="fas fa-trash-alt"></i> Hapus
</button>
</div>
</div>

<div class="credit-result-section">
<div class="credit-result-box">
<div class="credit-result-header">
<span class="credit-result-title">Total Credit:</span>
</div>

<div class="credit-total" id="creditTotal">IDR 0</div>

<div class="credit-action-buttons">
<button class="credit-btn credit-copy-btn" id="copyCreditBtn">
<i class="far fa-copy"></i> Salin Nominal
</button>
</div>
<div class="copy-notification" id="creditCopyNotification"></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>

<!-- Modal untuk preview gambar -->
<div id="imageModal" class="modal">
<span class="close-btn">&times;</span>
<div class="modal-content">
<div class="image-info" id="imageInfo">
<div class="image-detail">
<i class="fas fa-columns"></i>
<span id="colInfo">Kolom 1</span>
</div>
<div class="image-detail">
<i class="fas fa-user"></i>
<span id="userIdInfo">User ID: -</span>
</div>
<div class="image-detail">
<i class="fas fa-ticket-alt"></i>
<span id="ticketInfo">Kode Tiket: -</span>
</div>
</div>

<!-- Kontrol zoom -->
<div class="zoom-controls">
<button class="zoom-btn" id="zoomOutBtn" title="Zoom Out">
<i class="fas fa-search-minus"></i>
</button>
<button class="zoom-btn" id="zoomResetBtn" title="Reset Zoom">
<i class="fas fa-sync-alt"></i>
</button>
<button class="zoom-btn" id="zoomInBtn" title="Zoom In">
<i class="fas fa-search-plus"></i>
</button>
</div>

<div class="zoom-indicator" id="zoomIndicator">100%</div>

<!-- Tombol navigasi kolom - akan dibuat dinamis -->
<div class="modal-navigation" id="modalNavigation">
<!-- Tombol navigasi akan diisi secara dinamis oleh JavaScript -->
</div>

<div class="images-container" id="imagesContainer">
<!-- Gambar akan ditambahkan di sini -->
</div>
</div>
</div>

<!-- Toast Notification -->
<div id="toast">
<i class="fas fa-check-circle"></i>
<span id="toastMessage">âœ“ Disalin ke clipboard</span>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
// ===== TAB FUNCTIONALITY =====
const tabButtons = document.querySelectorAll('.tab-button');
const tabContents = document.querySelectorAll('.tab-content');

tabButtons.forEach(button => {
button.addEventListener('click', () => {
const tabId = button.getAttribute('data-tab');

// Update active tab button
tabButtons.forEach(btn => btn.classList.remove('active'));
button.classList.add('active');

// Update active tab content
tabContents.forEach(content => content.classList.remove('active'));
document.getElementById(tabId).classList.add('active');
});
});

// ===== SCATTER 6 KOLOM FUNCTIONALITY =====
// Elemen DOM untuk Scatter 6 Kolom
const autoInput = document.getElementById('autoInput');
const autoDeleteBtn = document.getElementById('autoDeleteBtn');
const dataCount = document.getElementById('dataCount');
const autoInputWarning = document.getElementById('autoInputWarning');
const autoInputError = document.getElementById('autoInputError');
const clearScatter6Btn = document.getElementById('clearScatter6Btn');
const scatter6Results = document.getElementById('scatter6Results');
const modal = document.getElementById('imageModal');
const closeBtn = document.querySelector('.close-btn');
const imageInfo = document.getElementById('imageInfo');
const colInfo = document.getElementById('colInfo');
const userIdInfo = document.getElementById('userIdInfo');
const ticketInfo = document.getElementById('ticketInfo');
const imagesContainer = document.getElementById('imagesContainer');
const tsToggle = document.getElementById('tsToggle');
const modalNavigation = document.getElementById('modalNavigation');

// Variabel untuk kontrol zoom
const zoomInBtn = document.getElementById('zoomInBtn');
const zoomOutBtn = document.getElementById('zoomOutBtn');
const zoomResetBtn = document.getElementById('zoomResetBtn');
const zoomIndicator = document.getElementById('zoomIndicator');

// Variabel global untuk menyimpan hasil
let scatterResults = [];

// Data untuk fitur undo cancel
let undoData = [];

// Variabel untuk menyimpan kolom yang sedang aktif di modal
let currentModalColumn = 1;

// Variabel untuk kontrol zoom
let currentZoomLevel = 1;
const ZOOM_STEP = 0.2;
const MIN_ZOOM = 0.5;
const MAX_ZOOM = 3;

// ===== CREDIT CALCULATOR FUNCTIONALITY =====
// Elemen DOM untuk Kalkulator Credit
const creditDataEl = document.getElementById('creditData');
const clearCreditBtn = document.getElementById('clearCreditBtn');
const creditTotalEl = document.getElementById('creditTotal');
const copyCreditBtn = document.getElementById('copyCreditBtn');
const creditCopyNotification = document.getElementById('creditCopyNotification');
const toast = document.getElementById('toast');
const toastMessage = document.getElementById('toastMessage');

// ===== INISIALISASI FUNGSI SCATTER 6 KOLOM =====
// Event untuk input otomatis
autoInput.addEventListener('input', function() {
updateDataCount();
processAutoInput();
});

autoDeleteBtn.addEventListener('click', function() {
autoInput.value = '';
updateDataCount();
processAutoInput();
});

// Tombol hapus untuk tab 6 kolom
clearScatter6Btn.addEventListener('click', function() {
autoInput.value = '';
scatter6Results.innerHTML = '';
scatterResults = [];
// Reset undo data
undoData = [];
updateDataCount();
hideAllMessages();
});

// Event untuk modal gambar
closeBtn.addEventListener('click', closeModal);

modal.addEventListener('click', function(e) {
if (e.target === modal) {
closeModal();
}
});

// Tutup modal dengan tombol ESC
document.addEventListener('keydown', function(e) {
if (e.key === "Escape" && modal.style.display === "block") {
closeModal();
}
});

// Event listener untuk toggle TS
tsToggle.addEventListener('change', function() {
updateResultsWithTS();
});

// Event listener untuk tombol navigasi di modal
modalNavigation.addEventListener('click', function(e) {
const navBtn = e.target.closest('.nav-btn');
if (navBtn) {
const colIndex = parseInt(navBtn.getAttribute('data-col'));

// Pindah ke kolom yang dipilih
navigateToColumn(colIndex);
}
});

// Event listener untuk kontrol zoom
zoomInBtn.addEventListener('click', function() {
zoomIn();
});

zoomOutBtn.addEventListener('click', function() {
zoomOut();
});

zoomResetBtn.addEventListener('click', function() {
resetZoom();
});

// ===== FUNGSI SCATTER 6 KOLOM =====
// Fungsi untuk auto-scroll ke hasil - DIOPTIMASI
function scrollToResults() {
const resultContainer = document.querySelector('.result-container');
if (resultContainer) {
// Gunakan instant scroll untuk kecepatan maksimal
resultContainer.scrollIntoView({
behavior: 'auto',
block: 'start'
});
}
}

// Fungsi untuk zoom in
function zoomIn() {
if (currentZoomLevel < MAX_ZOOM) {
currentZoomLevel += ZOOM_STEP;
applyZoom();
}
}

// Fungsi untuk zoom out
function zoomOut() {
if (currentZoomLevel > MIN_ZOOM) {
currentZoomLevel -= ZOOM_STEP;
applyZoom();
}
}

// Fungsi untuk reset zoom
function resetZoom() {
currentZoomLevel = 1;
applyZoom();
}

// Fungsi untuk menerapkan zoom ke semua gambar
function applyZoom() {
const images = document.querySelectorAll('.modal-img');
images.forEach(img => {
img.style.transform = `scale(${currentZoomLevel})`;
});

// Update indikator zoom
zoomIndicator.textContent = `${Math.round(currentZoomLevel * 100)}%`;

// Tampilkan indikator zoom sementara
zoomIndicator.style.display = 'block';
setTimeout(() => {
zoomIndicator.style.display = 'none';
}, 2000);
}

// Fungsi untuk navigasi ke kolom tertentu
function navigateToColumn(colIndex) {
const colData = scatterResults[colIndex - 1];

// Jika kolom memiliki gambar, tampilkan gambar kolom tersebut
if (colData && colData.hasImages) {
updateModalForColumn(colIndex);
}
}

// Fungsi untuk memperbarui modal dengan data kolom tertentu
function updateModalForColumn(colIndex) {
const colData = scatterResults[colIndex - 1];
if (!colData || !colData.hasImages) return;

// Update kolom yang sedang aktif
currentModalColumn = colIndex;

// Update informasi kolom
colInfo.textContent = `Kolom ${colIndex}`;
userIdInfo.textContent = `User ID: ${colData.userId}`;
ticketInfo.textContent = `Kode Tiket: ${colData.ticketCode}`;

// Kosongkan container gambar
imagesContainer.innerHTML = '';

// Tambahkan semua gambar ke container
colData.links.forEach(link => {
const img = document.createElement('img');
img.src = link;
img.className = 'modal-img';
img.alt = 'Bukti gambar';
imagesContainer.appendChild(img);

// Tambahkan event listener untuk klik gambar (toggle zoom)
img.addEventListener('click', function() {
this.classList.toggle('zoomed');
if (this.classList.contains('zoomed')) {
// Jika di-zoom, atur transform scale
this.style.transform = `scale(${currentZoomLevel})`;
} else {
// Jika tidak di-zoom, kembalikan ke ukuran normal
this.style.transform = 'scale(1)';
}
});
});

// Reset zoom setiap kali mengganti kolom
resetZoom();

// Update status tombol navigasi
updateNavigationButtons();
}

// Fungsi untuk membuat tombol navigasi modal secara dinamis
function generateModalNavigation() {
modalNavigation.innerHTML = '';

// Loop melalui scatterResults dan buat tombol untuk setiap kolom yang memiliki gambar
scatterResults.forEach((result, index) => {
const colIndex = index + 1;
if (result && result.hasImages) {
const button = document.createElement('button');
button.className = 'nav-btn';
if (colIndex === currentModalColumn) {
button.classList.add('active');
}
button.setAttribute('data-col', colIndex);
button.textContent = colIndex;
modalNavigation.appendChild(button);
}
});
}

// Fungsi untuk memperbarui status tombol navigasi
function updateNavigationButtons() {
const navButtons = document.querySelectorAll('.nav-btn');

navButtons.forEach(btn => {
const colIndex = parseInt(btn.getAttribute('data-col'));
const colData = scatterResults[colIndex - 1];

// Nonaktifkan tombol jika kolom tidak memiliki gambar
if (!colData || !colData.hasImages) {
btn.disabled = true;
} else {
btn.disabled = false;
}

// Tandai tombol aktif untuk kolom yang sedang ditampilkan
if (colIndex === currentModalColumn) {
btn.classList.add('active');
} else {
btn.classList.remove('active');
}
});
}

// Fungsi untuk menyembunyikan semua pesan
function hideAllMessages() {
autoInputWarning.style.display = 'none';
autoInputError.style.display = 'none';
}

// Fungsi untuk memperbarui jumlah data yang terdeteksi
function updateDataCount() {
const data = autoInput.value.trim();
if (!data) {
dataCount.textContent = '0';
hideAllMessages();
return;
}

// Hitung jumlah baris data
const lines = data.split('\n').filter(line => line.trim().length > 0);
const validLines = lines.filter(line => {
// Filter baris yang memiliki pola data yang sesuai
return line.includes('BET') && line.includes('http');
});

dataCount.textContent = validLines.length;

// Tampilkan peringatan jika lebih dari 6 data
if (validLines.length > 6) {
autoInputWarning.style.display = 'flex';
autoInputError.style.display = 'none';
} else if (validLines.length > 0) {
autoInputWarning.style.display = 'flex';
autoInputError.style.display = 'none';
} else {
hideAllMessages();
}
}

// Fungsi untuk memproses input otomatis
function processAutoInput() {
const data = autoInput.value.trim();
if (!data) {
// Kosongkan hasil jika tidak ada data
scatter6Results.innerHTML = '';
scatterResults = [];
return;
}

// Pisahkan data menjadi baris-baris
const lines = data.split('\n').filter(line => line.trim().length > 0);

// Filter baris yang valid (yang memiliki BET dan link gambar)
const validLines = lines.filter(line => {
return line.includes('BET') && line.includes('http');
});

if (validLines.length === 0) {
// Kosongkan hasil jika tidak ada data valid
scatter6Results.innerHTML = '';
scatterResults = [];
autoInputError.style.display = 'flex';
return;
} else {
autoInputError.style.display = 'none';
}

// Kosongkan hasil sebelumnya
scatter6Results.innerHTML = '';
scatterResults = [];

// Proses setiap baris data
validLines.forEach((line, index) => {
const result = processSingleScatterData(line);
scatterResults[index] = result;
});

// Tampilkan hasil
renderScatter6Results();

// Auto-scroll ke hasil jika ada data - DIOPTIMASI
const hasAnyData = scatterResults.some(result => result && result.hasData);
if (hasAnyData) {
// Scroll langsung tanpa delay
requestAnimationFrame(() => {
scrollToResults();
});
}
}

// Fungsi untuk memproses data scatter tunggal
function processSingleScatterData(data) {
if (!data) {
return {
userId: '-',
ticketCode: '-',
links: [],
linksText: '-',
betValue: '-',
hasData: false,
hasImages: false,
isCancelled: false
};
}

// Split data menjadi array
const parts = data.split(/\s+/);

// Ekstrak kode tiket (19 digit)
const ticketMatch = data.match(/\b\d{19}\b/);
const ticketCode = ticketMatch ? ticketMatch[0] : '-';

// Ekstrak username (kata sebelum link pertama)
let username = '-';
const firstLinkIndex = parts.findIndex(part => part.startsWith('http'));
if (firstLinkIndex > 0) {
username = parts[firstLinkIndex - 1];
} else if (parts.length > 0) {
username = parts[0];
}

// Ekstrak link (maksimal 3)
const imageLinks = (data.match(/https?:\/\/[^\s]+/g) || []).slice(0, 3);
const linksText = imageLinks.join(', ') || '-';
const hasImages = imageLinks.length > 0;

// Ekstrak nilai BET
const betMatch = data.match(/BET\s*([\d,]+)/i);
const betValue = betMatch ? formatNumber(betMatch[1].replace(/,/g, '')) : '-';

return {
userId: username,
ticketCode,
links: imageLinks,
linksText,
betValue,
hasData: true,
hasImages: hasImages,
isCancelled: false
};
}

// Fungsi untuk merender semua hasil
function renderScatter6Results() {
// Kosongkan hasil sebelumnya
scatter6Results.innerHTML = '';

// Bagi scatterResults menjadi chunk of 6 (untuk setiap baris)
const chunkSize = 6;
const chunks = [];
for (let i = 0; i < scatterResults.length; i += chunkSize) {
chunks.push(scatterResults.slice(i, i + chunkSize));
}

// Render setiap baris
chunks.forEach((chunk, rowIndex) => {
const rowDiv = document.createElement('div');

// Tentukan apakah baris ini penuh (6 kolom) atau tidak
if (chunk.length === 6) {
rowDiv.className = 'scatter-row full-row';
} else {
rowDiv.className = 'scatter-row';
}

// Render setiap kolom dalam baris
chunk.forEach((result, colIndex) => {
const absoluteIndex = rowIndex * chunkSize + colIndex;
renderScatter6Result(result, absoluteIndex + 1, rowDiv);
});

scatter6Results.appendChild(rowDiv);
});
}

// Fungsi untuk merender hasil satu kolom
function renderScatter6Result(result, colIndex, rowDiv) {
const colDiv = document.createElement('div');
colDiv.className = `column-result col${((colIndex-1) % 6) + 1}`;
colDiv.id = `result-col${colIndex}`;
colDiv.dataset.colIndex = colIndex;

// Tambahkan class berdasarkan status kolom
if (result && result.hasData && !result.isCancelled) {
colDiv.classList.add('has-data');
} else if (result && result.isCancelled) {
colDiv.classList.add('cancelled');
}

// Format user ID dengan TS jika toggle aktif
const displayUserId = tsToggle.checked && result && result.userId !== '-' ?
`${result.userId} TS` : (result ? result.userId : '-');

// Cek apakah ada data undo untuk kolom ini
const hasUndoData = undoData[colIndex - 1] !== undefined && undoData[colIndex - 1] !== null;

// Data untuk kolom (jika ada)
const ticketCode = result ? result.ticketCode : '-';
const linksText = result ? result.linksText : '-';
const betValue = result ? result.betValue : '-';
const hasImages = result ? result.hasImages : false;
const isCancelled = result ? result.isCancelled : false;

// Jika kolom dibatalkan, tampilkan data yang dibatalkan
const showData = !isCancelled && result && result.hasData;

colDiv.innerHTML = `
<h4>Kolom ${colIndex}</h4>
<div class="column-result-item">
<div class="column-result-label">User ID :</div>
<div class="column-result-value">${showData ? displayUserId : '-'}</div>
${showData ? `
<button class="column-btn-copy" data-value="${displayUserId}" title="Salin User ID">
<i class="far fa-copy"></i>
</button>
` : ''}
</div>
<div class="column-result-item">
<div class="column-result-label">Kode Tiket :</div>
<div class="column-result-value">${showData ? ticketCode : '-'}</div>
${showData ? `
<button class="column-btn-copy" data-value="${ticketCode}" title="Salin Kode Tiket">
<i class="far fa-copy"></i>
</button>
` : ''}
</div>
<div class="column-result-item">
<div class="column-result-label">Link Bukti :</div>
<div class="column-result-value">
<div class="link-preview-container">
<div class="link-placeholder">..</div>
${showData ? `
<button class="column-btn-copy" data-value="${linksText}" title="Salin Link">
<i class="far fa-copy"></i>
</button>
` : ''}
</div>
</div>
</div>
<div class="column-result-item">
<div class="column-result-label">Bettingan :</div>
<div class="column-result-value">${showData ? betValue : '-'}</div>
${showData ? `
<button class="column-btn-copy" data-value="${betValue}" title="Salin Bettingan">
<i class="far fa-copy"></i>
</button>
` : ''}
</div>
${showData && hasImages ? `
<button class="view-image-btn" data-col-index="${colIndex}">
<i class="fas fa-images"></i> Lihat Gambar
</button>
` : ''}
<button class="done-btn ${isCancelled ? 'disabled' : ''}" ${isCancelled ? 'disabled' : ''}>
<i class="fas fa-check-circle"></i> Tandai Selesai
</button>
<button class="cancel-btn ${hasUndoData ? 'undo' : ''}" data-col-index="${colIndex}">
<i class="fas fa-${hasUndoData ? 'undo' : 'times'}"></i> ${hasUndoData ? 'Undo' : 'Cancel'}
</button>
`;

rowDiv.appendChild(colDiv);
}

// Fungsi untuk memperbarui hasil dengan TS jika toggle aktif
function updateResultsWithTS() {
const isTSToggled = tsToggle.checked;

// Perbarui semua kolom hasil
scatterResults.forEach((result, index) => {
if (result && result.hasData && !result.isCancelled) {
const colIndex = index + 1;
const colElement = document.getElementById(`result-col${colIndex}`);
if (colElement) {
// Format user ID dengan TS jika toggle aktif
const displayUserId = isTSToggled && result.userId !== '-' ?
`${result.userId} TS` : result.userId;

// Perbarui nilai User ID
const userIdElement = colElement.querySelector('.column-result-value');
if (userIdElement && colElement.querySelector('.column-result-label').textContent.includes('User ID')) {
userIdElement.textContent = displayUserId;

// Perbarui juga nilai data untuk tombol salin
const copyButton = colElement.querySelector('.column-btn-copy[data-value]');
if (copyButton) {
copyButton.setAttribute('data-value', displayUserId);
}
}
}
}
});
}

// Event delegation untuk tombol salin di hasil 6 kolom
scatter6Results.addEventListener('click', function(e) {
const btn = e.target.closest('.column-btn-copy');
if (btn) {
// Cek apakah kolom ini sudah ditandai selesai (memiliki class 'done')
const columnResult = btn.closest('.column-result');
if (columnResult.classList.contains('done')) {
// Jika kolom sudah selesai, jangan salin dan beri feedback
const btnIcon = btn.querySelector('i');
const originalIcon = btnIcon.className;
btnIcon.className = 'fas fa-lock';
setTimeout(() => {
btnIcon.className = originalIcon;
}, 1000);
return; // Hentikan eksekusi
}

const value = btn.getAttribute('data-value');
const btnIcon = btn.querySelector('i');
const originalIcon = btnIcon.className;
const parentItem = btn.closest('.column-result-item');

// Animasi tombol
btn.classList.add('copied');

// Animasi highlight pada seluruh kolom item
parentItem.classList.add('copied');

// Ganti ikon ke centang
btnIcon.className = 'fas fa-check';

// Salin teks
copyText(value).then(() => {
console.log('Teks berhasil disalin');
}).catch(() => {
console.error('Gagal menyalin teks');
});

// Kembalikan ke ikon semula setelah 2 detik
setTimeout(() => {
btnIcon.className = originalIcon;
btn.classList.remove('copied');
}, 2000);

// Hapus class highlight setelah animasi selesai
setTimeout(() => {
parentItem.classList.remove('copied');
}, 1500);
}

// Event untuk tombol "Lihat Gambar"
const viewBtn = e.target.closest('.view-image-btn');
if (viewBtn) {
const colIndex = parseInt(viewBtn.getAttribute('data-col-index'));
showImagesForColumn(colIndex);
}

// Event untuk tombol Done
const doneBtn = e.target.closest('.done-btn');
if (doneBtn) {
const columnResult = doneBtn.closest('.column-result');

if (doneBtn.classList.contains('undo')) {
// Jika tombol sudah dalam mode "Undo", kembalikan ke normal
doneBtn.innerHTML = '<i class="fas fa-check-circle"></i> Tandai Selesai';
doneBtn.classList.remove('undo');
columnResult.classList.remove('done');
} else {
// Tandai kolom sebagai selesai
doneBtn.innerHTML = '<i class="fas fa-undo"></i> Batalkan';
doneBtn.classList.add('undo');
columnResult.classList.add('done');
}
}

// Event untuk tombol Cancel/Undo - PERBAIKAN UTAMA
const cancelBtn = e.target.closest('.cancel-btn');
if (cancelBtn) {
const colIndex = parseInt(cancelBtn.getAttribute('data-col-index'));

if (cancelBtn.classList.contains('undo')) {
// Jika tombol dalam mode "Undo", kembalikan data
if (undoData[colIndex - 1] !== undefined) {
// Kembalikan data dari undoData
scatterResults[colIndex - 1] = undoData[colIndex - 1];
undoData[colIndex - 1] = null;

// Proses ulang data
renderScatter6Results();
}
} else {
// Mode "Cancel" - tandai kolom sebagai dibatalkan
const currentData = scatterResults[colIndex - 1];

if (currentData && currentData.hasData) {
// Simpan data untuk undo
undoData[colIndex - 1] = {...currentData};

// Tandai kolom sebagai dibatalkan
scatterResults[colIndex - 1].isCancelled = true;

// Proses ulang data
renderScatter6Results();
}
}
}
});

// Fungsi untuk menutup modal
function closeModal() {
modal.style.display = "none";
// Reset zoom saat menutup modal
resetZoom();
}

// Fungsi untuk menampilkan gambar dari kolom tertentu
function showImagesForColumn(colIndex) {
currentModalColumn = colIndex;
// Generate tombol navigasi modal sebelum menampilkan modal
generateModalNavigation();
updateModalForColumn(colIndex);
modal.style.display = "block";
}

function formatNumber(num) {
if (!num || num === '-') return '-';
return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

// ===== FUNGSI CREDIT CALCULATOR =====
// Tombol hapus kalkulator
clearCreditBtn.addEventListener('click', function() {
creditDataEl.value = '';
creditTotalEl.textContent = 'IDR 0';
creditCopyNotification.textContent = '';
});

// Auto hitung saat data ditempel
creditDataEl.addEventListener('input', function() {
setTimeout(calculateCredit, 100);
});

// Tombol salin nominal credit
copyCreditBtn.addEventListener('click', copyCreditAmount);

// Fungsi untuk Kalkulator Credit PG SOFT
function calculateCredit() {
const data = creditDataEl.value.trim();

if (!data) {
creditTotalEl.textContent = 'IDR 0';
return;
}

const lines = data.split('\n');
let totalCredit = 0;

for (let i = 0; i < lines.length; i++) {
if (lines[i].trim() === 'Credit') {
const amountLine = lines[i+1] ? lines[i+1].trim() : '';
const amountMatch = amountLine.match(/IDR\s([\d,]+)/i);

if (amountMatch) {
const amountStr = amountMatch[1].replace(/,/g, '');
const amount = parseFloat(amountStr);

if (!isNaN(amount)) {
totalCredit += amount;
}
}
}
}

creditTotalEl.textContent = `IDR ${totalCredit.toLocaleString('id-ID')}`;
creditCopyNotification.textContent = '';
}

function copyCreditAmount() {
const resultText = creditTotalEl.textContent;
const numberOnly = resultText.replace('IDR ', '').replace(/\./g, '').replace(',', '.');

copyText(numberOnly).then(() => {
showToast("Nominal berhasil disalin!");
}).catch(err => {
console.error('Gagal menyalin teks: ', err);
showToast("Gagal menyalin!", "error");
});
}

// Fungsi untuk menyalin teks ke clipboard
function copyText(text) {
return new Promise((resolve, reject) => {
if (navigator.clipboard) {
navigator.clipboard.writeText(text)
.then(resolve)
.catch(() => {
fallbackCopy(text) ? resolve() : reject();
});
} else {
fallbackCopy(text) ? resolve() : reject();
}
});
}

function fallbackCopy(text) {
const textarea = document.createElement('textarea');
textarea.value = text;
textarea.style.position = 'fixed';
document.body.appendChild(textarea);
textarea.select();

try {
return document.execCommand('copy');
} catch (err) {
return false;
} finally {
document.body.removeChild(textarea);
}
}

// Improved toast notification function
function showToast(message = "âœ“ Disalin ke clipboard", type = "success") {
// Set message and type
toastMessage.textContent = message;

// Remove previous classes
toast.classList.remove("error");

// Add appropriate class for type
if (type === "error") {
toast.classList.add("error");
}

// Reset animation and show
toast.style.animation = 'none';
void toast.offsetHeight; // Trigger reflow
toast.style.display = 'flex';

// Apply animation
toast.style.animation = 'toastSlideIn 0.3s ease-out, toastSlideOut 0.3s ease-in 1.7s forwards';

// Hide after animation completes
setTimeout(() => {
toast.style.display = 'none';
}, 2000);
}

// Inisialisasi jumlah data untuk scatter 6 kolom
updateDataCount();
});
</script>
</body>
</html>

